---
- name: MS install
  hosts: all
  become: true
  tasks:
    - name: Create a directory if it does not exist
      ansible.builtin.file:
        path: /home/ubuntu/ms
        state: directory
        mode: '0755'

    - name: Copy directory of microservices
      copy: 
        src: ../../docker/docker-stack.yml
        dest: /home/ubuntu/ms

    - name: Deploy stack from a compose file
      docker_stack:
        state: present
        name: crawler
        compose:
        - /home/ubuntu/ms/docker-stack.yml 
